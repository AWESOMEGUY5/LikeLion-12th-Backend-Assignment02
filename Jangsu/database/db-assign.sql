CREATE TABLE `USER` (
	`STUDENT_ID`	int	NOT NULL,
	`SEAT_ID`	int	NOT NULL,
	`BOOK_ID`	varchar(10)	NOT NULL,
	`NAME`	varchar(10)	NOT NULL	COMMENT '이름',
	`GRADE`	varchar(5)	NOT NULL,
	`RETURN_DATE`	varchar(10)	NULL,
	`RESERVE_DATE`	varchar(10)	NULL
);

CREATE TABLE `SEAT` (
	`SEAT_ID`	int	NOT NULL	COMMENT '좌석 예약을 신청한 고유번호',
	`NAME`	varchar(10)	NULL,
	`IN_TIME`	varchar(10)	NULL,
	`OUT_TIME`	varchar(10)	NULL
);

CREATE TABLE `BOOK` (
	`BOOK_ID`	varchar(10)	NOT NULL	COMMENT '책의 고유번호',
	`Book_Name`	varchar(50)	NOT NULL,
	`Call_Number`	varchar(15)	NOT NULL,
	`NAME`	VARCHAR(10)	NULL
);

ALTER TABLE `USER` ADD CONSTRAINT `PK_USER` PRIMARY KEY (
	`STUDENT_ID`,
	`SEAT_ID`,
	`BOOK_ID`
);

ALTER TABLE `SEAT` ADD CONSTRAINT `PK_SEAT` PRIMARY KEY (
	`SEAT_ID`
);

ALTER TABLE `BOOK` ADD CONSTRAINT `PK_BOOK` PRIMARY KEY (
	`BOOK_ID`
);

ALTER TABLE `USER` ADD CONSTRAINT `FK_SEAT_TO_USER_1` FOREIGN KEY (
	`SEAT_ID`
)
REFERENCES `SEAT` (
	`SEAT_ID`
);

ALTER TABLE `USER` ADD CONSTRAINT `FK_BOOK_TO_USER_1` FOREIGN KEY (
	`BOOK_ID`
)
REFERENCES `BOOK` (
	`BOOK_ID`
);

INSERT INTO USER_ID(STUDENT_ID, NAME, RETURN_DATE, RESERVE_DATE, SEAT_ID,BOOK_ID)
VALUES('202417101', '한장수', '20240411', '20240408', 1, '1'),
           ('202417102', '이장수', '20240412', '20240408', 2, '2'),
           ('202416100', '박장수', '20240422', '20240408', 3, '3');

INSERT INTO SEAT(SEAT_ID, NAME, IN_TIME, OUT_TIME)
VALUES(1, '한장수', '04081200', '04081500'),
	   (2, '이장수', '04081000', '04081300'),
           (3, '박장수', '04081100', '04081400');

INSERT INTO BOOK ( BOOK_ID, BOOK_NAME , CALL_NUMBER , NAME )
VALUES ('1', '컴퓨터1', '001.23김', '한장수'),
            ('2', '문학1', '963.23조', '이장수'), 
            ('3', '과학1', '451.45박', '박장수');

SELECT USER_ID.STUDENT_ID, SEAT.SEAT_ID, SEAT.NAME FROM USER_ID LEFT JOIN SEAT ON USER_ID.NAME = SEAT.NAME;

SELECT USER_ID.STUDENT_ID, BOOK.BOOK_NAME, BOOK.CALL_NUMBER FROM USER_ID LEFT JOIN BOOK ON USER_ID.NAME = BOOK.NAME;